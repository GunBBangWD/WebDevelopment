SQL문 정리

CREATE TABLE 테이블명(
칼럼명 자료형 제약조건...
);
OR
CREATE TABLE 테이블명(
칼럼명 자료형 제약조건...
CONSTRAINT 또 다른 제약조건
REFERENCES 테이블명(칼럼명) ON DELETE CASCADE << 해당 칼럼을 참조(외래키)하는 엔티티 모두 삭제
); << 뒷 부분에 더 추가 가능



INSERT
INSERT INTO 테이블명 (칼럼명1,칼럼명2....) <생략 하면 전부 순서 맞춰서 기입해줘야 함
VALUES(값1,값2,값3...)



SELECT
SELECT 칼럼명1,칼럼명2 or *(전체 칼럼)
FROM 테이블명 <<(만약에 다른 DB랑 겹친다면 DB명.TABLE명 해주면 된다.)
WHERE 조건


+)비교 연산자
= < > <= >= <>(not의 의미)
각 조건별 연산  AND, OR

+)ORDER BY 칼럼명 오름차순 ASC/내림차순 DESC 

+)칼럼명 IN(값1,값2,값3..) 
>> OR의 개념 칼럼이 값1이거나 값2이거나...
조건에 맞다면 가져옴!  

+)WHERE 조건 부속
[속성이름] [BETWEEN 최소값 AND 최대값];
최소값 최대값 사이의 경우

CASE 찾을 요소란 또는 WHERE 절의 칼럼 값 란에 표기 가능 

CASE WHEN 조건 THEN  (실행문) 또는 (칼럼 값)

NVL2(칼럼명, 값1, 값2) 칼럼이 NULL이면 값1적용 NULL이 아닐경우 값2를 적용


---------------SELECT 부속---------중요도 조금 낮음--------------------
LISTAGG(칼럼 값,구분자)
구분자 ex) ('/') , (' ,')....


SUB QUERY 결과가 반드시 단일! >> (SELECT문)

SELECT 찾을 칼럼,....,(SELECT 문)
FROM 테이블명
WHERE절
(GROUP BY 절)
(ORDER BY 절)


SUB QUERY 결과가 반드시 단일! >> (SELECT문)

기본
SELECT 찾을 칼럼,....,(SELECT 문)
FROM 테이블명
WHERE절
(GROUP BY 절)
(ORDER BY 절)



WHERE 절에 서브쿼리로 들어가는 경우
리턴 조건

ALL(SELECT문) 
모든 값에 만족하는 조건

ANY(SELECT문)
하나의 값이라도 만족하는 조건

EXIST(SELECT문)
존재 여부 리턴

NOT EXIST(SELECT문)
EXIST의 부정



<JOIN함수 예제>
-- 1. DEPT 테이블과 EMP 테이블에서 사번, 사원명, 부서코드, 부서명을 검색하시오. (사원명 오름차순 정렬)

-- 2. DEPT 테이블과 EMP 테이블에서 사번, 사원명, 급여, 부서명을 검색하시오. 단, 급여가 2000 이상인 사원에 대하여 급여기준으로 내림차순 정렬할 것.

-- 3. DEPT 테이블과 EMP 테이블에서 사번, 사원명, 업무, 급여, 부서명을 검색하시오. 단, 업무가 MANAGER이며 급여가 2500 이상인 사원에 대해, 사번을 기준으로 오름차순 정렬할 것.

-- 4. EMP 테이블과 SALGRADE 테이블에서 사번, 사원명, 급여, 등급을 검색하시오. 단, 등급은 급여가  LOSAL과 HISAL 범위에 포함되고 등급이 4이며 급여를 기준으로 내림차순 정렬할 것.

-- 5. DEPT 테이블, EMP 테이블, SALGRADE 테이블에서 사번, 사원명, 부서명, 급여, 등급을 검색하시오. 단, 등급은 급여가 LOSAL과 HISAL 범위에 포함되며 등급을 기준으로 내림차순 정렬할 것.

-- 6. EMP 테이블에서 사원명과 해당 사원의 관리자명을 검색하시오.

-- 7. EMP 테이블에서 사원명과 해당 사원의 관리자명, 해당 사원의 관리자의 관리자명을 검색하시오.

-- 8. 7번 결과에서 상위 관리자가 없는 모든 사원의 이름도 사원명에 출력되도록 수정하시오.

 

 

<서브쿼리 예제>

-- 1. EMP 테이블에서 BLAKE보다 급여가 많은 사원들의 사번, 이름, 급여를 검색하시오.

-- 2. EMP 테이블에서 MILLER보다 늦게 입사한 사원의 사번, 이름, 입사일을 검색하시오.

-- 3. EMP 테이블에서 사원 전체 평균 급여보다 급여가 많은 사원들의 사번, 이름, 급여를 검색하시오.

-- 4. EMP 테이블에서 CLARK와 같은 부서이며, 사번이 7698인 직원의 급여보다 많은 급여를 받는 사원들의 사번, 이름, 급여를 검색하시오.


서브쿼리 예제 추가
-- 5.문제 : 사번이 '7844'인 사원의 사번, 이름, job 을 출력!
-- 6.문제 : 사번이 '7844'인 사원의 job 과 동일한 job 인 사원의 사번, 이름, job 을 출력!
-- 7.문제 : 사번이 '7521' 인 사원의 job 과 동일하고 '7900' 인 사번의 급여보다 많은 급여를 받는 사원의 사번, 이름, job, 급여를 출력하라
-- 8.문제 : 가장 적은 급여를 받는 사원의 사번, 이름, 급여를 출력!
-- 9.문제 : 부서별 최소 급여 중에서 30번 부서의 최소급여보다는 큰 최소급여인 부서의 부서번호, 최소 급여를 출력하라
-- 10.문제 : job이 CLERK 인 사원이 2명 이상 있는 부서의 부서번호, 부서명을 출력하라
--11.문제 : job 이 'CLERK' 인 사원이 한명이라도 있는 부서의 부서명만 출력하라
--12.문제 : 각 부서별로 최소 급여를 받는 사원의 부서번호, 부서명, 사번, 이름, 급여를 출력하라
--13.문제 : 직속상사가 없는 사원을 포함해서 부하직원사번, 부하직원명, 직속상사사번, 직속상사명을  출력하라
--14.문제 : 평균 급여보다 많거나 같고 최대 급여보다는 적은 급여를 받는 사원의 사번, 이름, 급여를 출력하라
--15.문제 : 월급이 높은 순으로 사번, 이름, 월급을 상위 5명만 출력하라

 
